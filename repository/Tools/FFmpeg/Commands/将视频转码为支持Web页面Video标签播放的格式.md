# 将视频转码为支持Web页面Video标签播放的格式

---

## 何种格式的视频支持在页面video标签中播放?

因为不同浏览器实现的标准不同, 为保证市面上主流使用的浏览器(Chrome, Edge, Firefox, Safari)能够正常播放, 视频需要满足以下条件
- 视频流编码 H.264
- 视频流像素格式 YUV420P
- 音频流编码 AAC

## 如何使用FFmpeg将视频转码成可以在页面video标签中播放的格式?

对应转码命令如下

```bash
ffmpeg \
-i {输入文件} \
-c:v libx264 \
-pix_fmt yuv420p \
-c:a aac \
[-r {目标帧率}] \
[-ar {目标音频采样率}] \
[-b:v {目标视频码率}] \
[-b:a {目标音频码率}] \
[-preset ultrafast] \
-f mp4 \
{输出文件}
```

其中以下参数为可选项, 可以根据自己的需要进行设置
- -r
- -ar
- -b:v
- -b:a
- -preset

## 可能遇到的问题

### 画面失真

经过上面的转码命令将视频转码后, 有可能出现转码后视频文件播放时画面充满马赛克, 非常不清晰的情况

问题原因分析与解决方案如下

- [H.264视频转码后画面失真问题研究](/repository/Tools/FFmpeg/H.264视频转码后画面失真问题研究.md#h264视频转码后画面失真问题研究)
